spring:
  application:
    name: econtract-ki
  
  # Datenbank-Konfiguration
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/econtract}
    username: ${SPRING_DATASOURCE_USERNAME:econtract_user}
    password: ${SPRING_DATASOURCE_PASSWORD:econtract_pass}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 5
      minimum-idle: 2
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      leak-detection-threshold: 60000
  
  # JPA/Hibernate
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    open-in-view: false
    properties:
      hibernate:
        dialect: ${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
        format_sql: true
        use_sql_comments: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
  
  # Flyway Migration
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    validate-on-migrate: true
  
  # Servlet/Multipart
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB
  
  # Jackson
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: Europe/Berlin

# Server
server:
  port: 8080
  servlet:
    context-path: /econtract
  compression:
    enabled: true
    mime-types: text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml
    min-response-size: 1024
  error:
    include-message: always

# Apache Solr
solr:
  url: ${SOLR_URL:http://localhost:8983/solr}
  core: econtract
  connection-timeout: 5000
  socket-timeout: 10000

# OpenAI API
openai:
  api:
    key: ${OPENAI_API_KEY:}
    url: https://api.openai.com/v1
    model: gpt-4
    temperature: 0.3
    max-tokens: 2000

# JWT Security
jwt:
  secret: ${JWT_SECRET:econtract-ki-secret-key-change-in-production-2025}
  expiration: 86400000 # 24 hours in milliseconds
  refresh-expiration: 604800000 # 7 days

# File Storage
file:
  upload-dir: ${FILE_UPLOAD_DIR:/var/econtract/uploads}
  max-size: 10485760 # 10MB in bytes
  allowed-extensions: pdf,doc,docx,txt,jpg,jpeg,png

# Application Settings
app:
  name: eContract KI
  version: 1.0.0
  admin-email: admin@jb-x.com
  
  # Security Settings
  security:
    # IP Whitelist (disabled by default)
    ip-whitelist:
      enabled: false
      allowed-ips: # Comma-separated list of allowed IPs
    
    # Rate Limiting (future implementation)
    rate-limit:
      enabled: false
      max-requests-per-minute: 60
  
  # Notification Settings
  notifications:
    enabled: true
    email-enabled: false
    deadline-reminder-days: 30,14,7,1
  
  # Workflow Settings
  workflow:
    default-approval-timeout-days: 7
    escalation-enabled: true
    escalation-after-days: 3

# Logging
logging:
  level:
    root: INFO
    com.jbx.econtract: INFO
    org.springframework.web: WARN
    org.springframework.security: WARN
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql.BasicBinder: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: /var/log/econtract/application.log
    max-size: 10MB
    max-history: 30

# Swagger/OpenAPI
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operations-sorter: method
    tags-sorter: alpha
  show-actuator: false

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized

