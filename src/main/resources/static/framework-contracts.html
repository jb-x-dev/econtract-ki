<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eContract KI - RahmenvertrÃ¤ge</title>
    <link rel="stylesheet" href="/econtract/css/main.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/minimal-theme.css">
    <link rel="stylesheet" href="css/unified-menu-minimal.css">
    <link rel="stylesheet" href="css/unified-menu-fix.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>ğŸ“‹ eContract KI</h1>
                <p class="subtitle">Intelligente Vertragsverwaltung fÃ¼r jb-x eBusiness Suite</p>
            </div>
            <nav>
                <a href="/econtract/dashboard.html">Dashboard</a>
                <a href="/econtract/contracts.html">VertrÃ¤ge</a>
                <a href="/econtract/framework-contracts.html" class="active">RahmenvertrÃ¤ge</a>
                <a href="/econtract/maintenance.html">Vertragspflege</a>
                <a href="/econtract/calendar.html">Kalender</a>
                <a href="/econtract/ai-assistant.html">KI-Assistent</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="page-header">
                <h2>ğŸ“‘ RahmenvertrÃ¤ge</h2>
                <button class="btn btn-primary" onclick="openFrameworkModal()">â• Neuer Rahmenvertrag</button>
            </div>
            <p>Verwalten Sie RahmenvertrÃ¤ge mit zugeordneten EinzelvertrÃ¤gen</p>

            <!-- Statistiken -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Gesamt</h3>
                    <div class="stat-number" id="totalFrameworks">0</div>
                    <p class="stat-label">RahmenvertrÃ¤ge</p>
                </div>
                <div class="stat-card">
                    <h3>Aktiv</h3>
                    <div class="stat-number" id="activeFrameworks">0</div>
                    <p class="stat-label">Laufende RahmenvertrÃ¤ge</p>
                </div>
                <div class="stat-card">
                    <h3>Gesamtvolumen</h3>
                    <div class="stat-number" id="totalVolume">0 â‚¬</div>
                    <p class="stat-label">Vereinbartes Volumen</p>
                </div>
                <div class="stat-card">
                    <h3>EinzelvertrÃ¤ge</h3>
                    <div class="stat-number" id="totalChildContracts">0</div>
                    <p class="stat-label">Zugeordnete VertrÃ¤ge</p>
                </div>
            </div>

            <!-- RahmenvertrÃ¤ge Liste -->
            <div class="card">
                <h3>ğŸ“‹ Alle RahmenvertrÃ¤ge</h3>
                
                <div class="toolbar">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="RahmenvertrÃ¤ge durchsuchen..." 
                               onkeypress="handleSearch(event)">
                        <button class="btn btn-secondary" onclick="searchFrameworks()">ğŸ” Suchen</button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="contracts-table">
                        <thead>
                            <tr>
                                <th>Rahmenvertragsnummer</th>
                                <th>Titel</th>
                                <th>Partner</th>
                                <th>Typ</th>
                                <th>Gesamtvolumen</th>
                                <th>Laufzeit</th>
                                <th>EinzelvertrÃ¤ge</th>
                                <th>Status</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="frameworkTableBody">
                            <tr><td colspan="9" class="loading">Lade Daten...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Â© 2025 jb-x business solutions GmbH | eContract KI v1.0.0</p>
        </div>
    </footer>

    <!-- Rahmenvertrag Modal -->
    <div id="frameworkModal" class="modal" style="display:none;">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeFrameworkModal()">&times;</span>
            <h2 id="modalTitle">Neuer Rahmenvertrag</h2>
            
            <form id="frameworkForm" onsubmit="saveFramework(event)">
                <input type="hidden" id="frameworkId">
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Titel *</label>
                        <input type="text" name="title" required 
                               placeholder="z.B. Rahmenvertrag IT-Dienstleistungen">
                    </div>
                    
                    <div class="form-group">
                        <label>Partner *</label>
                        <input type="text" name="partnerName" required 
                               placeholder="z.B. ABC GmbH">
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Vertragstyp *</label>
                        <select name="contractType" required>
                            <option value="">Bitte wÃ¤hlen...</option>
                            <option value="SUPPLIER">Lieferant</option>
                            <option value="CUSTOMER">Kunde</option>
                            <option value="SERVICE">Dienstleistung</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Abteilung</label>
                        <input type="text" name="department" placeholder="z.B. Einkauf">
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Startdatum</label>
                        <input type="date" name="startDate">
                    </div>
                    
                    <div class="form-group">
                        <label>Enddatum</label>
                        <input type="date" name="endDate">
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Gesamtvolumen (EUR)</label>
                        <input type="number" name="totalVolume" step="0.01" 
                               placeholder="z.B. 1000000.00">
                    </div>
                    
                    <div class="form-group">
                        <label>WÃ¤hrung</label>
                        <select name="currency">
                            <option value="EUR">EUR</option>
                            <option value="USD">USD</option>
                            <option value="GBP">GBP</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Beschreibung</label>
                    <textarea name="description" rows="4" 
                        placeholder="Beschreibung des Rahmenvertrags..."></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Speichern</button>
                    <button type="button" class="btn btn-secondary" 
                            onclick="closeFrameworkModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- EinzelvertrÃ¤ge Modal -->
    <div id="childContractsModal" class="modal" style="display:none;">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeChildContractsModal()">&times;</span>
            <h2>EinzelvertrÃ¤ge</h2>
            
            <div id="frameworkInfo" class="contract-summary"></div>
            
            <div id="volumeUsage" class="volume-usage"></div>
            
            <h3>Zugeordnete EinzelvertrÃ¤ge</h3>
            <div class="table-container">
                <table class="contracts-table">
                    <thead>
                        <tr>
                            <th>Vertragsnummer</th>
                            <th>Titel</th>
                            <th>Wert</th>
                            <th>Laufzeit</th>
                            <th>Status</th>
                            <th>Aktionen</th>
                        </tr>
                    </thead>
                    <tbody id="childContractsTableBody">
                        <tr><td colspan="6" class="loading">Lade Daten...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <div class="form-actions">
                <button class="btn btn-primary" onclick="addChildContract()">â• Einzelvertrag zuordnen</button>
                <button class="btn btn-secondary" onclick="closeChildContractsModal()">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <script src="/econtract/js/framework-contracts.js"></script>
    <script src="js/navigation.js"></script>
</body>
</html>

